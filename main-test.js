//Version 0.5.1
//eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(J(){17 d=\'0.5.1 | 8M 8I!\';17 f="8F 1G s 3x "+d;17 g="1o 3n 4i!<2c>4Z 1o 8C!<2c><a 1S=\'1c://8v.4m.4r/\' Y=\'2K\'>s 8s</a><2c><a 1S=\'1c://5B.1b/2a/s/8r/3J/s.2v.3d\' Y=\'2K\'>s 8q</a>";17 h="8p 8o 4R 4U 8n 8m 8l s. 5q 4R 2B 2x 1q 8k, 5M 5P 31 8j 8h. 5q 4k 8f 8e\'t 8c, 5M 8b 1q 89 <a 1S=\'1c://5B.1b/2a/s/88/40\' Y=\'2K\'>4K</a>.";17 j,3P,48,83,82,3Z,11,2U,3y,3F,36,3Q;17 k=0,81=0,7U=0;17 l=[],1g=[],4n=[],1W=[];17 m=\'4s-4t\';17 n=[R,R,R,R,R,R,R,R,R,R];1T(J(){3Z=7T(J(){w(X.1l(\'7S\').1J!==1){4V()}},1R)},7L);J 4V(){$.7J(\'1c://3s.1b/2a/s/3J/7H.3d\');7C(3Z);w($(\'#s-16\')[0]||$(\'#s-1i\')[0]||$(\'#5x\')[0]){$(\'#Z\').K(\'<S H="29 1L 1d 1M" E="19:1N;M-1A:S;W-1s:34;W-1u:30;">\'+h+\'</S>\')}I{37.1d(\'[s] 7B!\');j=X.1l(\'4I 4J\')[0].1l(\'38-4O 38-1v\')[0].7A(\'p\')[0].Q;$(\'2C\').K(\'<3G 3K="3O" 22="M/C" 1S="1c://57.3s.1b/7z/59.C/3J/59.7y.C">\');$(\'2C\').K(\'<3G 3K="3O" 22="M/C" 1S="//7x.7u.1b/C?5k=5l+5m+5n+5o">\');$(\'2C\').K(\'<5p 1Z="1c://7t.7s.1b/3d/2S.3d?7r=5C"></5p>\');1T(2V.1k(2V.5K.7q,5N),5O);1T(2V.1k(2V.5K.7n,4e),5O);4f()}}J 4e(a){11=a.3z.2G;w($(\'#s-21\').1t(\'12\')){1X(i=0;i<1W.1J;i++){w(1W[i].2G==a.3z.2G){$(\'#Z\').K(\'<S H="29 1L 1d 1M" E="19:1N;M-1A:S;W-1s:1R;W-1u:28;1P:25;"><b>[s]</b> 4u 2D 2B 3b 7h 31 7g 7f \'+(i+1)+\' 7e 7d 78 \'+1W[i].2v+\'!</S>\');$(\'#14-1I-1\')[0].1Y()}}w(1W.1J==49){1W.75()}1W.74({\'2G\':a.3z.2G,\'2v\':a.2v.70})}}J 5N(a){w(X.18(\'Z\').1H.B!==48){48=X.18(\'Z\').1H.B;w(X.18(\'Z\').1H.1l(\'2P\')[0].Q.2r(0,4)===\'$s\'){4W(X.18(\'Z\').1H.1l(\'2P\')[0].4X,X.18(\'Z\').1H.1l(\'4Y\')[0],X.18(\'Z\').1H)}w($(\'#s-26\').1t(\'12\')&&!X.6Z()){w(X.18(\'Z\').1H.1l(\'2P\')[0].Q.1n(\'@\'+j)!==-1){17 b=40 3j(X.18(\'Z\').1H.1l(\'4Y\')[0].Q,{55:\'2J://i.2W.1b/3T.2o\',6X:X.18(\'Z\').1H.1l(\'2P\')[0].4X});b.6V=J(){5d.6S();b.2d()};1T(J(){b.2d()},6R)}}w(!n[8]){6Q()}}}J 4W(a,b,c){a=a.2r(4,1D);w(a===\'4a\'){w(b.Q===\'2a\'||b.Q===\'4b\'||b.Q===\'4c\'){$(\'#Z\').K(\'<S H="29 1L 1d 1M" E="19:1N;M-1A:S;W-1s:5r;W-1u:46;1P:25;">A 40 4a 2B 5t 1X s!<2c><U E="W-1s:1R;W-1u:28">5v 5w 3u 1G 5A 1q 6L 4a!</U></S>\');$(\'#14-1I-1\')[0].1Y();1T(J(){$(c).2I()},50)}}I w(a.2r(0,7)===\'5I\'){w(b.Q===\'2a\'||b.Q===\'4b\'||b.Q===\'4c\'){$(\'#Z\').K(\'<S H="29 1L 1d 1M" E="19:1N;M-1A:S;W-1s:34;W-1u:30;">[\'+b.Q+\'] 6G: \'+a.2r(7,1D)+\'</S>\');1T(J(){$(c).2I()},50)}}I w(a.2r(0,5)===\'2m\'){w(b.Q===\'2a\'||b.Q===\'4b\'||b.Q===\'4c\'){$(\'#Z\').K(\'<S H="29 1L 1d 1M" E="19:1N;M-1A:S;W-1s:6F;W-1u:46;"><b>[s 6E]</b><2c> \'+a.2r(5,1D)+\'</S>\');$(\'#14-1I-1\')[0].1Y();1T(J(){$(c).2I()},50)}}}5d.3D(\'6C\',J(){1U.3H(\'3I\',1V.3e(n));1U.3H(\'3L\',1V.3e(l));1U.3H(\'4j\',1V.3e(1g))});w(3M(6A)==="1C"){2m("6x, 5w 6w 6v 2x 6u 6t 6s. 6r s 6q 3l 2x 4v 6p. 4x 41 a 4z 3x 4A 4B, 43, 6o 4D 4h.")}w(3M 1U.3I!==1C){17 o=1V.3p(1U.3I);1X(i=0;i<o.1J;i++){n[i]=o[i]}}w(3M 1U.3L!==1C){17 p=1V.3p(1U.3L);17 r=1V.3p(1U.4j);1X(i=0;i<p.1J;i++){l.2M(p[i])}1X(i=0;i<r.1J;i++){1g.2M(r[i])}}J 4f(){$(\'#2b\').6m(\'6k\',J(e){w(e.4M.4N>0){$(\'#2b\').1j(1V.3e(1V.3p($(\'#2b\').1j())+1));1p.4Q($(\'#2b\').1j())}I w(e.4M.4N<0){$(\'#2b\').1j($(\'#2b\').1j()-1);1p.4Q($(\'#2b\').1j())}$(\'#6j\').M(1p.6i()+\'%\')});$(\'#2i\').K(\'<F B="s-N" H="6h" E="D:L"><F H="N-1w"><1O 1Z="2J://i.2W.1b/3T.2o" H="N-55"><U B="s-N-1w-M" H="N-1w-M"></U><1O B="s-N-2d" 1Z="1O/2d.2o" H="N-2d"></F><F B="s-N-1x" E="2X-y:53;2X-x:6e;" H="N-1x"><F B="s-N-1x-M" E="2z:6d;2p:2q;" H="N-1x-M"></F></F></F>\');$(\'#s-N-2d\').1k(\'1h\',J(){$(\'#s-N\').C(\'D\',\'L\');$(\'#2i\').C(\'D\',\'L\')});$(\'#14-T\').5c().K(\'<F B="s-1i" H="1a" E="5e:5f(5g);2E-2w:L;1e:2t;1f:2t;39:1v;1B-1v:25;-6c-2v-6a: L;"></F>\');$(\'#s-1i\').K(\'<F B="s-69" E="2p:2q;5e:5f(5g);W-5k:5l 5m 5n 5o;19:66;3W:2A;M-3Y:1Q 1Q 64 #63;"><b>s</b></F>\');$(\'.4I.4J\').K(\'<a 1S="2J://4m.4r/62/61/60.5Y?5X=24" Y="2K"><T B="5x" H="38-4O 38-1v">[s] 5W 5U 5T</T></a>\');$(\'#s-1i\')[0].E.2l="2H(\'2J://i.2W.1b/3T.2o\')";5H=$(\'#14-T\').C(\'1f\').20(\'2f\')[0];2k=$(\'#2g-T\').C(\'1f\').20(\'2f\')[0];3o=$(\'#1K-T\').C(\'1f\').20(\'2f\')[0];$(\'#14-T\').5c().C(\'1e\',\'5R\');$(\'#14\').C(\'1e\',($(\'#14\').C(\'1e\').20(\'2f\')[0]-5));$(\'#14-T\').C(\'1f\',5H*0.9);$(\'#2g-T\').C(\'1f\',2k*0.9).C(\'1E\',$(\'#2g-T\').C(\'1E\').20(\'2f\')[0]-((2k)-(2k*0.9)));$(\'#1K-T\').C(\'1f\',3o*0.9).C(\'1E\',$(\'#1K-T\').C(\'1E\').20(\'2f\')[0]-(((3o)-(3o*0.9))+((2k)-(2k*0.9))));$(\'#s-1i\').C(\'2z\',\'1Q\').C(\'1v\',\'1Q\');$(\'#7l-1v\').K(\'<F B="s-16" E="D:L;2E-19:5S;5F-3Y: 5E 1Q 1Q 2A 5V 5D(1D,1D,1D,0.9);"></F>\');$(\'#s-16\').C(\'2z\',\'1R%-35\').C(\'1e\',$(\'#14\').C(\'1e\')).C(\'1f\',\'1R%\');$(\'#s-16\').K(\'<F B="s-2s" H="G 1a 1m">5Z 5z 5y<U B="s-42" H="s-1y" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-2j" H="G 1a 1m">1o 65<U B="s-3V" H="s-1y" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-26" H="G 1a 1m">67 68<U B="s-3U" H="s-1y" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-2n" H="G 1a 1m">6b 5z 5y<U B="s-3S" H="s-1y" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-27" H="G 1a 1m">1o 3E<U B="s-2Y" H="s-1y" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-21" H="G 1a 1m">6f 6g<U B="s-3w" H="s-1y" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-3t" H="G 1a 1m">2R 2O<U B="s-6l" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-2e" H="G 1a 1m">4Z 1o 6n<U B="s-44" H="s-1y" E="D:L"/></F>\');$(\'#s-16\').K(\'<F B="s-23" H="G 1a 1m">1o 3n 4i<U B="s-3k" H="s-1y" E="D:L"/></F>\');$(\'#s-1i\').1k(\'1h\',J(){w($(\'#s-16\').C(\'D\')===\'O\'){$(\'#\'+3P.20(\'-T\')[0]).C(\'D\',\'O\');$(\'#s-16\').C(\'D\',\'L\')}I{w(X.1l(\'3R\')[0]){3P=X.1l(\'3R\')[0].B}$(\'#14-T,#2g-T,#1K-T\').13(\'3R\');$(\'#14,#2g,#1K\').C(\'D\',\'L\');$(\'#s-16\').C(\'D\',\'O\')}});$(\'#14-T,#2g-T,#1K-T\').1k(\'1h\',J(){w($(\'#s-16\').C(\'D\')===\'O\'){$(\'#s-16\').C(\'D\',\'L\')}});$(\'#s-2s,#s-2j,#s-26,#s-2n,\'+\'#s-27,#s-21,#s-3t,#s-2e,#s-23\').1k(\'1h\',4q);$(\'2C\').K(\'<E 22="M/C">#s-1i:4p{3h:3g;2E-19:6y;}.s-1y{39:1v;2E-2w:2H("2J://i.2W.1b/6z.2o");2E-4l:6B-4l;1e:3c;1f:3c;1B-1v:6D;}.1m{1e:3c;3C-5L:5J-3C;6H:0.8;1P-2z:9.25;1P-3W:9.25;1P-1E:3c;19:6I;}.1m:4p{3h:3g;5F-3Y:5E 1Q 1Q 6J 6K 5D(1D,1D,1D,0.8);}.3v{1e:2t;M-1A:1E;1P:2t;1P-3W:6M;2X-5L:5J-3C;D:O;}</E>\');$(\'#Z\').K(\'<S B="s-6N" H="1L 1d 1M 1a 6O" E="19:1N;M-1A:S;W-1s:5r;W-1u:6P%;1P:2t;">\'+f+\'<2c><U E="W-1s:1R;W-1u:85%">\'+g+\'</U></S>\');X.18("14-1I-1").1Y();$(\'#Z\')[0].3r(R);1X(i=0;i<n.1J;i++){w(i===5){w(n[5]!==R){2U=$(\'#1O\')[0].E.2l;$(\'#1O\')[0].E.2l=\'2H(\'+n[5]+\')\';$(\'#s-2Y\').C(\'D\',\'O\');$(\'#s-27\').13(\'G\').15(\'12\')}}I w(i===9){w(n[9]!==R){$(\'#14-1I-1\')[0].1Z=n[9];$(\'#s-3k\').C(\'D\',\'O\');$(\'#s-23\').13(\'G\').15(\'12\')}}I w(n[i]&&i!==7){$(\'#s-f\'+(i+1)).1h()}}}J 4q(a){w(a.Y.B===\'s-2s\'){w($(\'#s-2s\').1t(\'G\')){w(X.18(\'1p\')){$(\'#s-42\').C(\'D\',\'O\');X.18(\'1p\').E.D=\'L\';n[0]=1r;$(\'#s-2s\').13(\'G\').15(\'12\')}}I{w(X.18(\'1p\')){$(\'#s-42\').C(\'D\',\'L\');X.18(\'1p\').E.D=\'O\';n[0]=R;$(\'#s-2s\').13(\'12\').15(\'G\')}}}I w(a.Y.B===\'s-2j\'){w($(\'#s-2j\').1t(\'G\')){$(\'2C\').K(\'<3G B="5h" 3K="3O" 1S="1c://3s.1b/2a/s/6T/6U.C">\');$(\'#s-3V\').C(\'D\',\'O\');n[1]=1r;$(\'#s-2j\').13(\'G\').15(\'12\')}I{$(\'#s-3V\').C(\'D\',\'L\');$(\'#5h\').2I();n[1]=R;$(\'#s-2j\').13(\'12\').15(\'G\')}}I w(a.Y.B===\'s-26\'){w($(\'#s-26\').1t(\'G\')){w(!3j){2m(\'[s] 5b 6W 2x 3q 2i 31 6Y 2h 4P 2B 2x 5t. 4x 41 a 4z 3x 4A 4B, 43, 4h 4D 43.\')}I w(3j.71!=="72"){3j.73()}I{$(\'#s-3U\').C(\'D\',\'O\');n[2]=1r;$(\'#s-26\').13(\'G\').15(\'12\')}}I{$(\'#s-3U\').C(\'D\',\'L\');n[2]=R;$(\'#s-26\').13(\'12\').15(\'G\')}}I w(a.Y.B===\'s-2n\'){w($(\'#s-2n\').1t(\'G\')){$(\'#s-3S\').C(\'D\',\'O\');$(\'#1p\').2I();$(\'#Z\').K(\'<S H="29 1L 1d 1M 1a 4L" E="19:1N;M-1A:S;W-1s:34;W-1u:30;">5b 3l 3q 1G 76 2h 4P 31 5P 3b 77 1G 3q 1q 3m 1p 4G. 79, 2h 2B 7a 4k 7b 7c!</S>\');X.18("14-1I-1").1Y();$(\'#Z\')[0].3r(R);n[3]=1r;$(\'#s-2n\').13(\'G\').15(\'12\')}I{$(\'#s-3S\').C(\'D\',\'L\');$(\'#Z\').K(\'<S H="29 1L 1d 1M 1a 4L" E="19:1N;M-1A:S;W-1s:34;W-1u:30;">5v 1q 3u 1G 5A 1q 3m 1p 4G!</S>\');X.18("14-1I-1").1Y();$(\'#Z\')[0].3r(R);n[3]=R;$(\'#s-2n\').13(\'12\').15(\'G\')}}I w(a.Y.B===\'s-27\'){w($(\'#s-27\').1t(\'G\')){$(\'#2i\')[0].E.D=\'O\';$(\'#s-N\').C(\'D\',\'O\');$(\'#s-N-1w-M\')[0].Q=\'<b>[s]</b> 1o 3E\';$(\'#s-N-1x-M\')[0].Q=\'<U E="4F:2L">1o 3E:</U><45 22="M" 4d="7i/7j/7k/5Q 7m 32 (7o 7p)" B="s-2F" 1z="" E="1B:2L;"/>\';$(\'#s-2F\')[0].3D(\'5u\',J(){w(/^1c?:\\/\\/(?:[a-z\\-]+\\.)+[a-z]{2,6}(?:\\/[^\\/#?]+)+\\.(?:7v?g|7w|2o)$/5i.5a($(\'#s-2F\')[0].1z)){2U=$(\'#1O\')[0].E.2l;$(\'#1O\')[0].E.2l=\'2H(\'+$(\'#s-2F\')[0].1z+\')\';$(\'#s-2Y\').C(\'D\',\'O\');$(\'#s-27\').13(\'G\').15(\'12\');n[5]=$(\'#s-2F\')[0].1z}I{2m(\'58 a 4S 2w 32.\')}})}I{$(\'#1O\')[0].E.2l=2U;$(\'#s-2Y\').C(\'D\',\'L\');n[5]=R;$(\'#s-27\').13(\'12\').15(\'G\')}}I w(a.Y.B===\'s-21\'){w($(\'#s-21\').1t(\'G\')){$(\'#s-3w\').C(\'D\',\'O\');n[6]=1r;$(\'#s-21\').13(\'G\').15(\'12\')}I{$(\'#s-3w\').C(\'D\',\'L\');n[6]=R;$(\'#s-21\').13(\'12\').15(\'G\');1W=[]}}I w(a.Y.B===\'s-3t\'){$(\'#2i\')[0].E.D=\'O\';$(\'#s-N\').C(\'D\',\'O\');4H()}I w(a.Y.B===\'s-2e\'){w($(\'#s-2e\').1t(\'G\')){$(\'#s-44\').C(\'D\',\'O\');n[8]=1r;$(\'#s-2e\').13(\'G\').15(\'12\')}I{$(\'#s-44\').C(\'D\',\'L\');n[8]=R;$(\'#s-2e\').13(\'12\').15(\'G\')}}I w(a.Y.B===\'s-23\'){w($(\'#s-23\').1t(\'G\')){$(\'#2i\')[0].E.D=\'O\';$(\'#s-N\').C(\'D\',\'O\');$(\'#s-N-1w-M\')[0].Q=\'<b>[s]</b> 1o 3n 5j\';$(\'#s-N-1x-M\')[0].Q=\'<U E="4F:2L">1o 3n 5j:</U><45 22="M" 4d="7D/7E/7F 7G 32" B="s-2y" 1z="" E="1B:2L;"/>\';$(\'#s-2y\')[0].3D(\'5u\',J(){w(/^1c?:\\/\\/(?:[a-z\\-0-9]+\\.)+[a-z]{2,6}(?:\\/[^\\/#?]+)+\\.(?:7I|52|7K)$/5i.5a($(\'#s-2y\')[0].1z)){$(\'#14-1I-1\')[0].1Z=$(\'#s-2y\')[0].1z;$(\'#s-3k\').C(\'D\',\'O\');$(\'#s-23\').13(\'G\').15(\'12\');n[9]=$(\'#s-2y\')[0].1z}I{2m(\'58 a 4S 51 32.\')}})}I{$(\'#14-1I-1\')[0].1Z=\'1c://57.7M.7N/7O/51/N.52\';$(\'#s-3k\').C(\'D\',\'L\');n[9]=R;$(\'#s-23\').13(\'12\').15(\'G\')}}}J 4H(){w(!n[7]){2m(\'7P 7Q! 7R 4T a 2R 3m, 1h 1q 3X. 3A 1k a 1w 1G 47 1q 1K 7V 2h 2D. 4u 5I 3l 7W 7X 1q 7Y 7Z 4U 3l 41 2h 80.\');n[7]=1r}$(\'#s-N-1w-M\')[0].Q="<b>[s]</b> 2R 2O";$(\'#s-N-1x-M\')[0].Q=\'\';$(\'#s-N-1x-M\').K(\'<F B="s-P-V-1F" E="2p:2q;2z:2t;1e:84;1f:86;2X-y:53;"></F>\');$(\'#s-N-1x-M\').K(\'<F B="s-P-87"><3a><45 B="s-P-V-3i" 4d="2O 2R" 22="M/C"><T B="s-P-V-T">2O</T></3a><F E="39:1v;2p:2q;1v:2A;" B="s-P-V-8a"><U B="s-P-V-2Q" E="19:4w;3h:3g;1B:25;D:L"><u>8d 4o</u></U><U B="s-P-V-2N" E="19:4w;3h:3g;1B:25;D:L"><u>8g 4o</u></U></F></F>\');$(\'#s-P-V-T\').1k(\'1h\',J(){2T(R)});$(\'#s-P-V-2Q\').1k(\'1h\',J(){k--;36=3F;2T(1r)});$(\'#s-P-V-2N\').1k(\'1h\',J(){k++;36=3y;2T(1r)})}J 8i(e){w(e.Y.2Z.B===\'1i-5G\'||e.Y.B===\'1i-5G\'){w(e.Y.2Z.56===\'54\'){w(l.1n(11)===-1&&11!==1C){l.2M(11)}w(1g.1n(11)!==-1&&11!==1C){1g.33(1g.1n(11),1)}}I{w(l.1n(11)!==-1&&11!==1C){l.33(l.1n(11),1)}}}I w(e.Y.2Z.B===\'1i-4E\'||e.Y.B===\'1i-4E\'){w(e.Y.2Z.56===\'54\'){w(1g.1n(11)===-1&&11!==1C){1g.2M(11)}w(l.1n(11)!==-1&&11!==1C){l.33(l.1n(11),1)}}I{w(1g.1n(11)!==-1&&11!==1C){1g.33(1g.1n(11),1)}}}}J 2T(e){37.1d(e);3Q=$(\'#s-P-V-3i\').1j();$(\'#s-P-V-1F\')[0].Q=\'\';$(\'#s-P-V-1F\').K(\'<F B="s-P-3X-1F" E="1B:2A;2p:2q;1e:1R%;1f:4C;39:1E;"></F>\');$(\'#s-P-V-1F\').K(\'<F B="s-P-1w-1F" E="1B:2A;1B-1E:2L;2p:2q;1E:4C;1e:1R%;"></F>\');4n=[];17 q=$(\'#s-P-V-3i\').1j();17 c=3N.2S.3f.V.8t({q:q,8u:\'3B\',8w:10,8x:36,22:\'3m\',8y:\'L\',8z:\'1r\'});c.8A(J(a){17 b=a.8B;w(b.2u.1J!==0){3y=b.8D;3F=b.8E;1X(i=0;i<b.2u.1J;i++){$(\'#s-P-3X-1F\')[0].Q+=\'<a 1S="1c:3f.1b/4T?v=\'+b.2u[i].B.4g+\'" Y="2K"><2w 1Z=\'+b.2u[i].3B.8G.8H.2H+\' 5s-3a="3A 4K 1G 8J 1G 1q 3f 3u"></2w></a>\';$(\'#s-P-1w-1F\')[0].Q+=\'<F B="\'+b.2u[i].B.4g+\'" H="3v" 5s-3a="3A 1G 47 1K & 1Y 2h 2D">\'+b.2u[i].3B.1w+\'</F>\'}w(k>0){$(\'#s-P-V-2Q\')[0].E.D=\'O\';$(\'#s-P-V-2N\')[0].E.D=\'O\'}I{k=0;$(\'#s-P-V-2Q\')[0].E.D=\'L\';$(\'#s-P-V-2N\')[0].E.D=\'O\'}37.1d(\'8K 8L 1z: \'+k);$(\'.3v\').1k(\'1h\',4y);$(\'#s-P-V-3i\').1j(3Q)}I{$(\'#s-P-V-1F\')[0].Q=\'8N V 8O.\'}})}J 4y(e){$(\'#2D-3b\').1j(\'1c://8P.4v/\'+e.Y.B);37.1d($(\'#2D-3b\').1j());1T(J(){$(\'#1K-47\').1h()},50)}})();J 5C(){3N.2S.8Q(\'4s-4t\');3N.2S.8R(\'3f\',\'8S\')}',62,551,'||||||||||||||||||||||||||||NCS||||if|||||id|css|display|style|div|disabled|class|else|function|append|none|text|notif|block|yt|innerHTML|false|center|button|span|search|font|document|target|messages||ccid|enabled|removeClass|chat|addClass|menu|var|getElementById|color|animated|com|https|log|height|width|msongs|click|btn|val|on|getElementsByClassName|NCSf|indexOf|Custom|player|the|true|weight|hasClass|size|right|title|content|checkmark|value|align|margin|undefined|255|left|container|to|lastChild|sound|length|waitlist|cm|mention|whitesmoke|img|padding|0px|100|href|setTimeout|localStorage|JSON|songHistory|for|play|src|split|f7|type|f10||5px|f3|f6||NCSalert|Nuvm|volume|br|close|f9|px|users|this|notifications|f2|initialWidth2|backgroundImage|alert|f4|png|position|absolute|slice|f1|30px|items|user|image|not|customSoundInput|top|10px|is|head|song|background|customBgInput|cid|url|remove|http|_blank|20px|push|nextPage|Search|msg|prevPage|YouTube|client|makeRequest|previousBg|API|imgur|overflow|f6c|offsetParent||and|URL|splice|150||ytPage|console|nav|float|label|in|15px|js|stringify|youtube|pointer|cursor|query|Notification|f10c|will|video|Mention|initialWidth3|parse|have|scrollIntoView|rawgit|f8|page|NCScopiable|f7c|version|ytNextPage|media|Click|snippet|word|addEventListener|Background|ytPrevPage|link|setItem|NCSlocalSettings|master|rel|NCSsmartWoot|typeof|gapi|stylesheet|lastSelected|ytCurrentSearch|selected|f4c|5ThdRUd|f3c|f2c|bottom|thumbnail|shadow|checkIfReady|new|use|f1c|Firefox|f9c|input||join|prevObj||update|CSxKING|Pixel|placeholder|cfns|NCSinit|videoId|Opera|Sounds|NCSsmartMeh|it|repeat|electricgaming|ytSearchResults|Page|hover|NCSfeatures|ga|AIzaSyARvwirFktEIi_BTaKcCi9Ja|m3IEJYIRk|This|be|blue|Please|cTWI|modern|of|Chrome|120px|or|meh|marge|back|ytAppend|navbar|header|here|fadeInLeftBig|originalEvent|wheelDelta|form|option|setVolume|that|valid|watch|you|start|NCScommandSorter|innerText|uname|Disable||audio|mp3|auto|active|icon|className|cdn|Not|animate|test|You|parent|window|transform|rotate|0deg|CSxKINGtheme|ig|Sound|family|IM|Fell|English|SC|script|If|200|aria|available|blur|Refresh|your|THEME_BUG|Player|Video|get|github|googleApiClientReady|rgba|inset|box|woot|initialWidth1|message|break|events|wrap|please|cfnm|4000|refresh|GIF|35px|transparent|Issue|an|4px|Report|fid|php|Hide|forumdisplay|en|forums|FFD700|2px|Theme|black|Desktop|Notifications|name|select|Remove|webkit|50px|hidden|History|Alert|notification|getVolume|volumePercent|mousewheel|f8c|bind|Usernames|Safari|saved|settings|Your|storage|local|support|does|browser|Unfortunately|grey|rF5fHxr|Storage|no|beforeunload|25px|ALERT|500|says|opacity|white|9px|1px|latest|33px|startupmsg|flip|120|cfun|3000|focus|dev|NC331_Style|onclick|do|body|therefore|hasFocus|username|permission|granted|requestPermission|unshift|pop|disable|order|by|Sorry|how|works|currently|ago|songs|played|was|history|PNG|JPG|JPEG|app|Image|ADVANCE|ideally|1600x900|CHAT|onload|google|apis|googleapis|jpe|gif|fonts|min|daneden|getElementsByTagName|Started|clearInterval|OGG|MP3|WAV|Audio|CustomNames|ogg|getScript|wav|2000|bssecure|net|nightcore|Hey|there|To|loading|setInterval|rotateDeg2|with|only|appear|first|time|feature|rotateDeg|unameicon|unamestuff|320px||580px|buttons|issues|issue|changePage|report|work|Previous|doesn|still|Next|again|voteclick|try|case|running|already|are|seems|It|autoloader|raw|website|list|part|ncs|maxResults|pageToken|safeSearch|videoSyndicated|execute|result|Names|nextPageToken|prevPageToken|Welcome|thumbnails|default|Time|go|Current|ytCurPage|Pumpkin|No|results|youtu|setApiKey|load|v3'.split('|'),0,{}))
 
// Version 0.6.0, temporary method of update. Used it to remove broken features in prep for the new NC331 patch.
 // This update fixes/moves the NCS issue button.
var version = '0.6.6 | Bug fixes... Again...';
var startUpMsg = "Welcome to NCS version " + version;
var newFeaturesMsg = "Added ETA countdown for Waitlist button (Shows ETA till you dj, currently not toggleable)<br>Fixed Send Message textbox being under the footer for some users.<br><a href='https://ncs.electricgaming.ga/' target='_blank'>NCS website</a><br><a href='https://github.com/Nuvm/NCS/raw/master/NCS.user.js' target='_blank'>NCS autoloader</a>";
var alertMsg = "The chat has been fixed!";
var errorMsg = "It seems that you are already running NCS. If that is not the case, please refresh and try again. If it still doesn't work, please report the issue <a href='https://github.com/Nuvm/NCS/issues/new' target='_blank'>here</a>.";
var uname, lastSelected, prevObj, unamestuff, unameicon, checkIfReady, ccid, previousBg, ytNextPage, ytPrevPage, ytPage, ytCurrentSearch;
var ytCurPage = 0,
  rotateDeg = 0,
  rotateDeg2 = 0;
var wsongs = [],
  msongs = [],
  ytSearchResults = [],
  songHistory = [];
var apiKey = 'AIzaSyARvwirFktEIi_BTaKcCi9Ja-m3IEJYIRk';
var NCSsettings = [false, false, false, false, false, false, false, false, false, false];
setTimeout(function() {
  checkIfReady = setInterval(function() {
    if (document.getElementsByClassName('loading').length !== 1) {
      start();
    }
  }, 100);
}, 2000);
 
function start() {
  $.getScript('https://rawgit.com/Nuvm/NCS/master/CustomNames.js');
  clearInterval(checkIfReady);
  if ($('#NCS-menu')[0] || $('#NCS-btn')[0] || $('#THEME_BUG')[0]) {
    $('#messages').append('<center class="NCSalert cm log mention" style="color:whitesmoke;text-align:center;font-weight:150;font-size:30;">' + errorMsg + '</center>');
  } else {
    console.log('[NCS] Started!');
    uname = document.getElementsByClassName('navbar header')[0].getElementsByClassName('nav-form nav-right')[0].getElementsByTagName('p')[0].innerHTML;
    $('head').append('<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/daneden/animate.css/master/animate.min.css">');
    $('head').append('<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=IM+Fell+English+SC">');
    $('head').append('<script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>');
    setTimeout(API.on(API.events.CHAT, cfnm), 4000);
    setTimeout(API.on(API.events.ADVANCE, cfns), 4000);
    NCSinit();
  }
}
 
function cfns(data) {
  //ccid = data.media.cid;
  /*if($('#NCS-f5').hasClass('enabled')){
    if(wsongs.indexOf(ccid)!==-1){
      setTimeout(function(){$('#btn-woot').click();},1500);
    } else if(msongs.indexOf(ccid)!==-1){
      setTimeout(function(){$('#btn-meh').click();},1500);
    }
  }*/
 
  /*if($('#NCS-f7').hasClass('enabled')){
    for(i=0;i<songHistory.length;i++){
      if(songHistory[i].cid==data.media.cid){
        $('#messages').append('<center class="NCSalert cm log mention" style="color:whitesmoke;text-align:center;font-weight:100;font-size:28;padding:5px;"><b>[NCS]</b> This song is in history and was played '+(i+1)+' songs ago by ' + songHistory[i].user + '!</center>');
        $('#chat-sound-1')[0].play();
      }
    }*/
  if (NCSsettings[6]) {
    var inWaitlist = false;
    for (var i in wl) {
      var wlData = wl[i];
      if (wlData.user.userid == User.userid) {
        inWaitlist = true;
      }
    }
    if (!inWaitlist) {
      console.log('joining waitlist');
      socket.send(JSON.stringify({
        name: username,
        type: 'booth',
        operation : 'join',
      }));
    }
  }
  /*if (songHistory.length == 49) {
    songHistory.pop();
  }
  songHistory.unshift({
    'cid': data.media.cid,
    'user': data.user.username
  });*/
}
 
 
function cfnm(data) {
  if (document.getElementById('messages').lastChild.id !== prevObj) {
    prevObj = document.getElementById('messages').lastChild.id;
    if (document.getElementById('messages').lastChild.getElementsByClassName('msg')[0].innerHTML.slice(0, 4) === '$NCS') {
      NCScommandSorter(document.getElementById('messages').lastChild.getElementsByClassName('msg')[0].innerText, document.getElementById('messages').lastChild.getElementsByClassName('uname')[0], document.getElementById('messages').lastChild)
    }
    if ($('#NCS-f3').hasClass('enabled') && !document.hasFocus()) {
      if (document.getElementById('messages').lastChild.getElementsByClassName('msg')[0].innerHTML.indexOf('@' + uname) !== -1) {
        var notif = new Notification(document.getElementById('messages').lastChild.getElementsByClassName('uname')[0].innerHTML, {
          icon: 'http://i.imgur.com/5ThdRUd.png',
          body: document.getElementById('messages').lastChild.getElementsByClassName('msg')[0].innerText
        });
        notif.onclick = function() {
          window.focus();
          notif.close()
        };
        setTimeout(function() {
          notif.close()
        }, 3000)
      }
    }
    if (!NCSsettings[8]) {
      cfun()
    }
  }
}
 
function NCScommandSorter(msg, user, element) {
  msg = msg.slice(4, 255);
  if (msg === 'update') {
    if (user.innerHTML === 'Nuvm' || user.innerHTML === 'CSxKING' || user.innerHTML === 'Pixel') {
      $('#messages').append('<center class="NCSalert cm log mention" style="color:whitesmoke;text-align:center;font-weight:200;font-size:46;padding:5px;">A new update is available for NCS!<br><span style="font-weight:100;font-size:28">Refresh your page to get the latest update!</span></center>');
      $('#chat-sound-1')[0].play();
      setTimeout(function() {
        $(element).remove()
      }, 50)
    }
  } else if (msg.slice(0, 7) === 'message') {
    if (user.innerHTML === 'Nuvm' || user.innerHTML === 'CSxKING' || user.innerHTML === 'Pixel') {
      $('#messages').append('<center class="NCSalert cm log mention" style="color:whitesmoke;text-align:center;font-weight:150;font-size:30;">[' + user.innerHTML + '] says: ' + msg.slice(7, 255) + '</center>');
      setTimeout(function() {
        $(element).remove()
      }, 50)
    }
  } else if (msg.slice(0, 5) === 'alert') {
    if (user.innerHTML === 'Nuvm' || user.innerHTML === 'CSxKING' || user.innerHTML === 'Pixel') {
      $('#messages').append('<center class="NCSalert cm log mention" style="color:whitesmoke;text-align:center;font-weight:500;font-size:46;"><b>[NCS ALERT]</b><br> ' + msg.slice(5, 255) + '</center>');
      $('#chat-sound-1')[0].play();
      setTimeout(function() {
        $(element).remove()
      }, 50)
    }
  }
}
 
window.addEventListener('beforeunload', function() {
  localStorage.setItem('NCSlocalSettings', JSON.stringify(NCSsettings));
  localStorage.setItem('NCSsmartWoot', JSON.stringify(wsongs));
  localStorage.setItem('NCSsmartMeh', JSON.stringify(msongs));
});
if (typeof(Storage) === "undefined") {
  alert("Unfortunately, your browser does not support local storage. Your NCS settings will not be saved. Please use a modern version of Chrome, Firefox, Safari or Opera.")
}
if (typeof localStorage.NCSlocalSettings !== undefined) {
  var localSettings = JSON.parse(localStorage.NCSlocalSettings);
  for (i = 0; i < localSettings.length; i++) {
    NCSsettings[i] = localSettings[i];
  }
}
if (typeof localStorage.NCSsmartWoot !== undefined) {
  var localWoot = JSON.parse(localStorage.NCSsmartWoot);
  var localMeh = JSON.parse(localStorage.NCSsmartMeh);
  for (i = 0; i < localWoot.length; i++) {
    wsongs.push(localWoot[i]);
  }
  for (i = 0; i < localMeh.length; i++) {
    msongs.push(localMeh[i]);
  }
}
 
function NCSinit() {
  $('#volume').bind('mousewheel', function(e) {
    if (e.originalEvent.wheelDelta > 0) {
      $('#volume').val(JSON.stringify(JSON.parse($('#volume').val()) + 1));
      player.setVolume($('#volume').val());
    } else if (e.originalEvent.wheelDelta < 0) {
      $('#volume').val($('#volume').val() - 1);
      player.setVolume($('#volume').val());
    }
    $('#volumePercent').text(player.getVolume() + '%');
  });
  $('#notifications').append('<div id="NCS-notif" class="notification" style="display:none"><div class="notif-title"><img src="http://i.imgur.com/5ThdRUd.png" class="notif-icon"><span id="NCS-notif-title-text" class="notif-title-text"></span><img id="NCS-notif-close" src="img/close.png" class="notif-close"></div><div id="NCS-notif-content" style="overflow-y:auto;overflow-x:hidden;" class="notif-content"><div id="NCS-notif-content-text" style="top:50px;position:absolute;" class="notif-content-text"></div></div></div>');
  $('#NCS-notif-close').on('click', function() {
    $('#NCS-notif').css('display', 'none');
    $('#notifications').css('display', 'none');
  });
  $('#chat-button').parent().append('<div id="NCS-btn" class="animated" style="transform:rotate(0deg);background-image:none;height:30px;width:30px;float:right;margin-right:5px;-webkit-user-select: none;"></div>');
  $('#NCS-btn').append('<div id="NCS-name" style="position:absolute;transform:rotate(0deg);font-family:IM Fell English SC;color:black;bottom:10px;text-shadow:0px 0px 2px #FFD700;"><b>NCS</b></div>');
  //$('.navbar.header').append('<a href="http://electricgaming.ga/forums/en/forumdisplay.php?fid=24" target="_blank"><button id="THEME_BUG" class="nav-form nav-right">[NCS] Report an Issue</button></a>');
  $('#NCS-btn')[0].style.backgroundImage = "url('http://i.imgur.com/5ThdRUd.png')";
  initialWidth1 = $('#chat-button').css('width').split('px')[0];
  initialWidth2 = $('#users-button').css('width').split('px')[0];
  initialWidth3 = $('#waitlist-button').css('width').split('px')[0];
  $('#chat-button').parent().css('height', '35px');
  $('#chat').css('height', ($('#chat').css('height').split('px')[0] - 5));
  $('#chat-button').css('width', initialWidth1 * 0.9);
  $('#users-button').css('width', initialWidth2 * 0.9).css('left', $('#users-button').css('left').split('px')[0] - ((initialWidth2) - (initialWidth2 * 0.9)));
  $('#waitlist-button').css('width', initialWidth3 * 0.9).css('left', $('#waitlist-button').css('left').split('px')[0] - (((initialWidth3) - (initialWidth3 * 0.9)) + ((initialWidth2) - (initialWidth2 * 0.9))));
  $('#NCS-btn').css('top', '0px').css('right', '0px');
  $('#app-right').append('<div id="NCS-menu" style="display:none;background-color:transparent;box-shadow: inset 0px 0px 10px 4px rgba(255,255,255,0.9);"></div>');
  $('#NCS-menu').css('top', '100%-35').css('height', $('#chat').css('height')).css('width', '100%');
  $('#NCS-menu').append('<div id="NCS-f1" class="disabled animated NCSf">Hide Video Player<span id="NCS-f1c" class="NCS-checkmark" style="display:none"/></div>');
  $('#NCS-menu').append('<div id="NCS-f2" class="disabled animated NCSf">Custom Theme<span id="NCS-f2c" class="NCS-checkmark" style="display:none"/></div>');
  $('#NCS-menu').append('<div id="NCS-f3" class="disabled animated NCSf">Desktop Notifications<span id="NCS-f3c" class="NCS-checkmark" style="display:none"/></div>');
  $('#NCS-menu').append('<div id="NCS-f4" class="disabled animated NCSf">Remove Video Player<span id="NCS-f4c" class="NCS-checkmark" style="display:none"/></div>');
  //$('#NCS-menu').append('<div id="NCS-f5" class="disabled animated NCSf" style="top:170px;">Smartvote<span id="NCS-f5c" class="NCS-checkmark" style="display:none"/></div>');
  $('#NCS-menu').append('<div id="NCS-f6" class="disabled animated NCSf">Custom Background<span id="NCS-f6c" class="NCS-checkmark" style="display:none"/></div>');
  if(username==='Nuvm'||username==='CSxKING'||username==='Pixel'||username==='Don'){
    $('#NCS-menu').append('<div id="NCS-f7" class="disabled animated NCSf">Autojoin Waitlist<span id="NCS-f7c" class="NCS-checkmark" style="display:none"/></div>');
  }
  //$('#NCS-menu').append('<div id="NCS-f8" class="disabled animated NCSf">YouTube Search<span id="NCS-f8c" style="display:none"/></div>');
  $('#NCS-menu').append('<div id="NCS-f9" class="disabled animated NCSf">Disable Custom Usernames<span id="NCS-f9c" class="NCS-checkmark" style="display:none"/></div>');
  $('#NCS-menu').append('<div id="NCS-f10" class="disabled animated NCSf">Custom Mention Sounds<span id="NCS-f10c" class="NCS-checkmark" style="display:none"/></div>');
  $('#NCS-menu').append('<div id="NCS-f11" class="disabled animated NCSf"><a style="text-decoration: none; color: white;"  target="_blank" href="http://electricgaming.ga/forums/en/forumdisplay.php?fid=24">Found An Issue? Report It Here!</a></div>');
  $('#NCS-btn').on('click', function() {
    if ($('#NCS-menu').css('display') === 'block') {
      $('#' + lastSelected.split('-button')[0]).css('display', 'block');
      $('#NCS-menu').css('display', 'none')
    } else {
      if (document.getElementsByClassName('selected')[0]) {
        lastSelected = document.getElementsByClassName('selected')[0].id
      }
      $('#chat-button,#users-button,#waitlist-button').removeClass('selected');
      $('#chat,#users,#waitlist').css('display', 'none');
      $('#NCS-menu').css('display', 'block')
    }
  });
  $('#chat-button,#users-button,#waitlist-button').on('click', function() {
    if ($('#NCS-menu').css('display') === 'block') {
      $('#NCS-menu').css('display', 'none')
    }
  });
  $('#NCS-f1,#NCS-f2,#NCS-f3,#NCS-f4,'/*#NCS-f5,*/ + '#NCS-f6,#NCS-f7,'/*#NCS-f8,*/+'#NCS-f9,#NCS-f10').on('click', NCSfeatures);
  $('head').append('<style type="text/css">#NCS-btn:hover{cursor:pointer;background-color:grey;}.NCS-checkmark{float:right;background-image:url("http://i.imgur.com/rF5fHxr.png");background-repeat:no-repeat;height:15px;width:15px;margin-right:25px;}.NCSf{height:15px;word-wrap:break-word;opacity:0.8;padding-top:9.5px;padding-bottom:9.5px;padding-left:15px;color:white;}.NCSf:hover{cursor:pointer;box-shadow:inset 0px 0px 9px 1px rgba(255,255,255,0.8);}.NCScopiable{height:30px;text-align:left;padding:30px;padding-bottom:33px;overflow-wrap:break-word;display:block;}</style>');
  $('#messages').append('<center id="NCS-startupmsg" class="cm log mention" style="color:whitesmoke;text-align:center;font-weight:200;font-size:120%;padding:30px;">' + startUpMsg + '<br><span style="font-weight:100;font-size:85%">' + newFeaturesMsg + '</span></center>');
  $('#messages').append('<center id="NCS-startupalert" class="cm log mention" style="color:whitesmoke;text-align:center;font-weight:100;font-size:85%;padding:30px;">'+alertMsg);
  //document.getElementById("chat-sound-1").play();
  $('#messages')[0].scrollIntoView(false);
  for (i = 0; i < NCSsettings.length; i++) {
    if (i === 5) {
      if (NCSsettings[5] !== false) {
        previousBg = $('#img')[0].style.backgroundImage;
        $('#img')[0].style.backgroundImage = 'url(' + NCSsettings[5] + ')';
        $('#NCS-f6c').css('display', 'block');
        $('#NCS-f6').removeClass('disabled').addClass('enabled');
      }
    } else if (i === 9) {
      if (NCSsettings[9] !== false) {
        $('#chat-sound-1')[0].src = NCSsettings[9];
        $('#NCS-f10c').css('display', 'block');
        $('#NCS-f10').removeClass('disabled').addClass('enabled');
      }
    } else if (NCSsettings[i] && i !== 7) {
      $('#NCS-f' + (i + 1)).click();
    }
  }
}
 
function NCSfeatures(eventData) {
  if (eventData.target.id === 'NCS-f1') {
    if ($('#NCS-f1').hasClass('disabled')) {
      if (document.getElementById('player')) {
        $('#NCS-f1c').css('display', 'block');
        document.getElementById('player').style.display = 'none';
        NCSsettings[0] = true;
        $('#NCS-f1').removeClass('disabled').addClass('enabled')
      }
    } else {
      if (document.getElementById('player')) {
        $('#NCS-f1c').css('display', 'none');
        document.getElementById('player').style.display = 'block';
        NCSsettings[0] = false;
        $('#NCS-f1').removeClass('enabled').addClass('disabled')
      }
    }
  } else if (eventData.target.id === 'NCS-f2') {
    if ($('#NCS-f2').hasClass('disabled')) {
      $('head').append('<link id="CSxKINGtheme" rel="stylesheet" href="https://rawgit.com/Nuvm/NCS/dev/NC331_Style.css">');
      $('#NCS-f2c').css('display', 'block');
      NCSsettings[1] = true;
      $('#NCS-f2').removeClass('disabled').addClass('enabled')
    } else {
      $('#NCS-f2c').css('display', 'none');
      $('#CSxKINGtheme').remove();
      NCSsettings[1] = false;
      $('#NCS-f2').removeClass('enabled').addClass('disabled')
    }
  } else if (eventData.target.id === 'NCS-f3') {
    if ($('#NCS-f3').hasClass('disabled')) {
      if (!Notification) {
        alert('[NCS] You do not have notifications and therefore this option is not available. Please use a modern version of Chrome, Firefox, Opera or Firefox.')
      } else if (Notification.permission !== "granted") {
        Notification.requestPermission()
      } else {
        $('#NCS-f3c').css('display', 'block');
        NCSsettings[2] = true;
        $('#NCS-f3').removeClass('disabled').addClass('enabled')
      }
    } else {
      $('#NCS-f3c').css('display', 'none');
      NCSsettings[2] = false;
      $('#NCS-f3').removeClass('enabled').addClass('disabled')
    }
  } else if (eventData.target.id === 'NCS-f4') {
    if ($('#NCS-f4').hasClass('disabled')) {
      $('#NCS-f4c').css('display', 'block');
      $('#player').remove();
      $('#messages').append('<center class="NCSalert cm log mention animated fadeInLeftBig" style="color:whitesmoke;text-align:center;font-weight:150;font-size:30;">You will have to disable this option and refresh in order to have the video player back. Sorry, this is how it works currently!</center>');
      //document.getElementById("chat-sound-1").play();
      $('#messages')[0].scrollIntoView(false);
      NCSsettings[3] = true;
      $('#NCS-f4').removeClass('disabled').addClass('enabled')
    } else {
      $('#NCS-f4c').css('display', 'none');
      $('#messages').append('<center class="NCSalert cm log mention animated fadeInLeftBig" style="color:whitesmoke;text-align:center;font-weight:150;font-size:30;">Refresh the page to get the video player back!</center>');
      //document.getElementById("chat-sound-1").play();
      $('#messages')[0].scrollIntoView(false);
      NCSsettings[3] = false;
      $('#NCS-f4').removeClass('enabled').addClass('disabled')
    }
  }
  /* else if (eventData.target.id === 'NCS-f5') {
      if ($('#NCS-f5').hasClass('disabled')) {
        if (typeof(Storage) === "undefined") {
          alert("[NCS] Unfortunately, your browser does not support local storage. SmartVote will not work. Please use a modern version of Chrome, Firefox, Safari or Opera.");
        } else if(!document.getElementById('player')){
          alert("[NCS] SmartVote doesn't work when the video player is removed. We are sorry for the inconvenience.");
        } else {
          document.getElementById('btn-woot').addEventListener('click',voteclick);
          document.getElementById('btn-meh').addEventListener('click',voteclick);
          $('#NCS-f5c').css('display', 'block');
          NCSsettings[4] = true;
          $('#NCS-f5').removeClass('disabled').addClass('enabled')
        }
      } else {
        document.getElementById('btn-woot').removeEventListener('click',voteclick);
        document.getElementById('btn-meh').removeEventListener('click',voteclick);
        $('#NCS-f5c').css('display', 'none');
        NCSsettings[4] = false;
        $('#NCS-f5').removeClass('enabled').addClass('disabled')
      }
    }*/
  else if (eventData.target.id === 'NCS-f6') {
    if ($('#NCS-f6').hasClass('disabled')) {
      $('#notifications')[0].style.display = 'block';
      $('#NCS-notif').css('display', 'block');
      $('#NCS-notif-title-text')[0].innerHTML = '<b>[NCS]</b> Custom Background';
      $('#NCS-notif-content-text')[0].innerHTML = '<span style="marge:20px">Custom Background:</span><input type="text" placeholder="PNG/JPG/JPEG/GIF Image URL (ideally 1600x900)" id="NCS-customBgInput" value="" style="margin:20px;"/>';
      $('#NCS-customBgInput')[0].addEventListener('blur', function() {
        if (/^https?:\/\/(?:[a-z\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)$/ig.test($('#NCS-customBgInput')[0].value)) {
          previousBg = $('#img')[0].style.backgroundImage;
          $('#img')[0].style.backgroundImage = 'url(' + $('#NCS-customBgInput')[0].value + ')';
          $('#NCS-f6c').css('display', 'block');
          $('#NCS-f6').removeClass('disabled').addClass('enabled');
          NCSsettings[5] = $('#NCS-customBgInput')[0].value;
        } else {
          alert('Not a valid image URL.');
        }
      });
    } else {
      $('#img')[0].style.backgroundImage = previousBg;
      $('#NCS-f6c').css('display', 'none');
      NCSsettings[5] = false;
      $('#NCS-f6').removeClass('enabled').addClass('disabled')
    }
  } else if (eventData.target.id === 'NCS-f7') {
    if ($('#NCS-f7').hasClass('disabled')) {
      $('#NCS-f7c').css('display', 'block');
      NCSsettings[6] = true;
      $('#NCS-f7').removeClass('disabled').addClass('enabled');
      cfns();
    } else {
      $('#NCS-f7c').css('display', 'none');
      NCSsettings[6] = false;
      $('#NCS-f7').removeClass('enabled').addClass('disabled');
    }
  } else if (eventData.target.id === 'NCS-f8') {
    $('#notifications')[0].style.display = 'block';
    $('#NCS-notif').css('display', 'block');
    /*$('#NCS-notif-title-text')[0].innerHTML = '<b>[NCS]</b> Settings';
    $('#NCS-notif-content-text')[0].innerHTML = '<div id="NCS-ft-container-customBg"><input id="NCS-ft-checkbox-customBg" type="checkbox"/><span style="margin:10px;">Custom Background:</span><input style="float:right;" type="text" placeholder="PNG/JPG/JPEG/GIF Image URL (ideally 1600x900)" id="NCS-ft-customBgInput" value="" style="margin:20px;"/></div>';
    $('#NCS-ft-customBgInput')[0].addEventListener('blur',function(){if(/^https?:\/\/(?:[a-z\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)$/ig.test($('#NCS-ft-customBgInput')[0].value)){previousBg=$('#img')[0].style.backgroundImage;$('#img')[0].style.backgroundImage = 'url('+$('#NCS-ft-customBgInput')[0].value+')';$('#NCS-f6c').css('display','block');$('#NCS-f6').removeClass('disabled').addClass('enabled');NCSsettings[5]=$('#NCS-ft-customBgInput')[0].value;$('#NCS-ft-customBgInput')[0].value=NCSsettings[5];$('#NCS-ft-checkbox-customBg')[0].checked=true;}else{alert('Not a valid image URL.');$('#NCS-ft-checkbox-customBg')[0].checked=false;}});
    if($('#NCS-f6').hasClass('enabled')){
      $('#NCS-ft-checkbox-customBg')[0].checked=true;
      $('#NCS-ft-customBgInput')[0].value = NCSsettings[5];
    } else {
      $('#NCS-ft-checkbox-customBg')[0].checked=false;
      $('#NCS-ft-customBgInput')[0].value = '';
    }
    $('#NCS-notif-content-text')[0].innerHTML+='<br><div id="NCS-ft-ytSearch" class="NCSf" onclick="ytAppend()">Search YouTube</div>';*/
    ytAppend();
  } else if (eventData.target.id === 'NCS-f9') {
    if ($('#NCS-f9').hasClass('disabled')) {
      $('#NCS-f9c').css('display', 'block');
      NCSsettings[8] = true;
      $('#NCS-f9').removeClass('disabled').addClass('enabled')
    } else {
      $('#NCS-f9c').css('display', 'none');
      NCSsettings[8] = false;
      $('#NCS-f9').removeClass('enabled').addClass('disabled');
    }
  } else if (eventData.target.id === 'NCS-f10') {
    if ($('#NCS-f10').hasClass('disabled')) {
      $('#notifications')[0].style.display = 'block';
      $('#NCS-notif').css('display', 'block');
      $('#NCS-notif-title-text')[0].innerHTML = '<b>[NCS]</b> Custom Mention Sound';
      $('#NCS-notif-content-text')[0].innerHTML = '<span style="marge:20px">Custom Mention Sound:</span><input type="text" placeholder="OGG/MP3/WAV Audio URL" id="NCS-customSoundInput" value="" style="margin:20px;"/>';
      $('#NCS-customSoundInput')[0].addEventListener('blur', function() {
        if (/^https?:\/\/(?:[a-z\-0-9]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:ogg|mp3|wav)$/ig.test($('#NCS-customSoundInput')[0].value)) {
          $('#chat-sound-1')[0].src = $('#NCS-customSoundInput')[0].value;
          $('#NCS-f10c').css('display', 'block');
          $('#NCS-f10').removeClass('disabled').addClass('enabled');
          NCSsettings[9] = $('#NCS-customSoundInput')[0].value;
        } else {
          alert('Not a valid audio URL.');
        }
      });
    } else {
      $('#chat-sound-1')[0].src = 'https://cdn.bssecure.net/nightcore/audio/notif.mp3';
      $('#NCS-f10c').css('display', 'none');
      NCSsettings[9] = false;
      $('#NCS-f10').removeClass('enabled').addClass('disabled');
    }
  }
}
 
function ytAppend() {
  if (!NCSsettings[7]) {
    alert('Hey there! To watch a YouTube video, click the thumbnail. Click on a title to join the waitlist with this song. This message will only appear the first time you will use this feature.');
    NCSsettings[7] = true;
  }
  $('#NCS-notif-title-text')[0].innerHTML = "<b>[NCS]</b> YouTube Search";
  $('#NCS-notif-content-text')[0].innerHTML = '';
  $('#NCS-notif-content-text').append('<div id="NCS-yt-search-container" style="position:absolute;top:30px;height:320px;width:580px;overflow-y:auto;"></div>');
  $('#NCS-notif-content-text').append('<div id="NCS-yt-buttons"><label><input id="NCS-yt-search-query" placeholder="Search YouTube" type="text/css"><button id="NCS-yt-search-button">Search</button></label><div style="float:right;position:absolute;right:10px;" id="NCS-yt-search-changePage"><span id="NCS-yt-search-prevPage" style="color:blue;cursor:pointer;margin:5px;display:none"><u>Previous Page</u></span><span id="NCS-yt-search-nextPage" style="color:blue;cursor:pointer;margin:5px;display:none"><u>Next Page</u></span></div></div>');
  $('#NCS-yt-search-button').on('click', function() {
    makeRequest(false);
  });
  $('#NCS-yt-search-prevPage').on('click', function() {
    ytCurPage--;
    ytPage = ytPrevPage;
    makeRequest(true);
  });
  $('#NCS-yt-search-nextPage').on('click', function() {
    ytCurPage++;
    ytPage = ytNextPage;
    makeRequest(true);
  });
}
 
function voteclick(e) {
  if (e.target.offsetParent.id === 'btn-woot' || e.target.id === 'btn-woot') {
    if (e.target.offsetParent.className === 'active') {
      if (wsongs.indexOf(ccid) === -1 && ccid !== undefined) {
        wsongs.push(ccid);
      }
      if (msongs.indexOf(ccid) !== -1 && ccid !== undefined) {
        msongs.splice(msongs.indexOf(ccid), 1);
      }
    } else {
      if (wsongs.indexOf(ccid) !== -1 && ccid !== undefined) {
        wsongs.splice(wsongs.indexOf(ccid), 1);
      }
    }
  } else if (e.target.offsetParent.id === 'btn-meh' || e.target.id === 'btn-meh') {
    if (e.target.offsetParent.className === 'active') {
      if (msongs.indexOf(ccid) === -1 && ccid !== undefined) {
        msongs.push(ccid);
      }
      if (wsongs.indexOf(ccid) !== -1 && ccid !== undefined) {
        wsongs.splice(wsongs.indexOf(ccid), 1);
      }
    } else {
      if (msongs.indexOf(ccid) !== -1 && ccid !== undefined) {
        msongs.splice(msongs.indexOf(ccid), 1);
      }
    }
  }
}
 
function makeRequest(e) {
  console.log(e);
  ytCurrentSearch = $('#NCS-yt-search-query').val();
  $('#NCS-yt-search-container')[0].innerHTML = '';
  $('#NCS-yt-search-container').append('<div id="NCS-yt-thumbnail-container" style="margin:10px;position:absolute;height:100%;width:120px;float:left;"></div>');
  $('#NCS-yt-search-container').append('<div id="NCS-yt-title-container" style="margin:10px;margin-left:20px;position:absolute;left:120px;height:100%;"></div>');
  ytSearchResults = [];
  var q = $('#NCS-yt-search-query').val();
  var request = gapi.client.youtube.search.list({
    q: q,
    part: 'snippet',
    maxResults: 10,
    pageToken: ytPage,
    type: 'video',
    safeSearch: 'none',
    videoSyndicated: 'true'
  });
  request.execute(function(response) {
    var str = response.result;
    if (str.items.length !== 0) {
      ytNextPage = str.nextPageToken;
      ytPrevPage = str.prevPageToken;
      for (i = 0; i < str.items.length; i++) {
        $('#NCS-yt-thumbnail-container')[0].innerHTML += '<a href="https:youtube.com/watch?v=' + str.items[i].id.videoId + '" target="_blank"><image src=' + str.items[i].snippet.thumbnails.default.url + ' aria-label="Click here to go to the youtube page"></image></a>';
        $('#NCS-yt-title-container')[0].innerHTML += '<div id="' + str.items[i].id.videoId + '" class="NCScopiable" aria-label="Click to join waitlist & play this song">' + str.items[i].snippet.title + '</div>';
      }
      //$('#NCS-yt-buttons')[0].innerHTML += '<br><div style="float:right;position:absolute;right:10px;" id="NCS-yt-search-changePage"><span id="NCS-yt-search-prevPage" style="color:blue;cursor:pointer;margin:5px"><u>Previous Page</u></span><span id="NCS-yt-search-nextPage" style="color:blue;cursor:pointer;margin:5px"><u>Next Page</u></span>';
      if (ytCurPage > 0) {
        $('#NCS-yt-search-prevPage')[0].style.display = 'block';
        $('#NCS-yt-search-nextPage')[0].style.display = 'block';
      } else {
        ytCurPage = 0;
        $('#NCS-yt-search-prevPage')[0].style.display = 'none';
        $('#NCS-yt-search-nextPage')[0].style.display = 'block';
      }
 
      console.log('Current ytCurPage value: ' + ytCurPage);
      $('.NCScopiable').on('click', cTWI);
      $('#NCS-yt-search-query').val(ytCurrentSearch);
    } else {
      $('#NCS-yt-search-container')[0].innerHTML = 'No search results.';
    }
  });
 
}
 
function cTWI(e) {
  $('#song-in').val('https://youtu.be/' + e.target.id);
  console.log($('#song-in').val());
  setTimeout(function() {
    $('#waitlist-join').click();
  }, 50);
}

// ETA Script by Thomas
(function() {
  $('head').prepend('<style>#waitlist-join::after { content: attr(data-eta); display: block; }</style>');
  $('head').append('<style>#waitlist-join { padding: 0px !important; }</style>');
  // $('head').prepend('<style>input[type="text"] { position: relative; bottom: 11px; right: 0px; width: 230px; height: 11px; }</style>');

  function readable(total) {
    var hours = ~~(total / 3600);
    var minutes = (~~(total / 60)) % 60;
    var seconds = total % 60;
    return normalize(hours) + ':' + normalize(minutes) + ':' + normalize(seconds);
  }

  function normalize(number) {
    var addition = (number < 10
      ? '0'
      : '');
    return addition + number;
  }

  function getPosition() {
    var userid = User.userid;
    for (var i = 0; i < wl.length; i++) {
      if (wl[i].user.userid == userid)
        return i;
    }
    return -1;
  }

  setInterval(function() {
    var position = getPosition();
    position = (position < 0) ? wl.length : position;
    var eta = ~~((position * (3.5 * 60)) + (player.getDuration() - player.getCurrentTime()));
    $('#waitlist-join').attr('data-eta', readable(eta));
  }, 1000);
})();
